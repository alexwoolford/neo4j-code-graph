= Graph model

This page defines the nodes and relationships used by Neo4j Code Graph so new users can read and write queries confidently.

== Nodes

- *File*: A source file; properties include `path`, `total_lines`, `method_count`, `class_count`.
- *FileVer*: A versioned view of a file at a commit. Linked to `File` by `OF_FILE` and to `Commit` by `CHANGED`.
- *Method*: A function/method; key property `method_signature` plus `name`, `class_name`, `estimated_lines`, centrality scores.
- *Class*: A class declaration; `name`, `file`, flags (e.g., `is_abstract`).
- *Interface*: An interface declaration; `name`, `file`.
- *Import*: An import statement within a file; `import_path`.
- *ExternalDependency*: A third‑party package or module (Aura‑compatible subset); `package`, `version`.
- *Commit*: A Git commit; `sha`, `date`, `message`.
- *Developer*: An author; `name`, `email`.
- *CVE*: Vulnerability record (from NVD); `id`, `cvss_score`.
- *Directory*: A directory node used for hierarchical navigation; `path`.

== Relationships

// Core, high-frequency edges
- *pass:[(Commit)-[:CHANGED]->(FileVer)]*: Git change written by a commit.
- *pass:[(FileVer)-[:OF_FILE]->(File)]*: Version points to its file.
- *pass:[(Method)-[:CALLS]->(Method)]*: Static call graph edges.
- *pass:[(Method)-[:SIMILAR]->(Method)]*: Semantic similarity from embeddings (`score`).
- *pass:[(File)-[:DECLARES]->(Method)]*: File declares a method.
- *pass:[(Class)-[:CONTAINS_METHOD]->(Method)]*: Method belongs to class.
- *pass:[(Interface)-[:CONTAINS_METHOD]->(Method)]*: Method belongs to interface.
- *pass:[(File)-[:IMPORTS]->(Import)]*: File contains an import declaration.
- *pass:[(Import)-[:DEPENDS_ON]->(ExternalDependency)]*: Import maps to an external package.

// Type and hierarchy
- *pass:[(Class)-[:EXTENDS]->(Class)]*: Inheritance between classes.
- *pass:[(Interface)-[:EXTENDS]->(Interface)]*: Inheritance between interfaces.
- *pass:[(Class)-[:IMPLEMENTS]->(Interface)]*: Class implements interface (the only cross‑type edge).
- *pass:[(File)-[:DEFINES]->(Class|Interface)]*: File defines type declarations.
- *pass:[(Directory)-[:CONTAINS]->(Directory)]*: Directory hierarchy.
- *pass:[(Directory)-[:CONTAINS]->(File)]*: Files within a directory.

// People and security
- *pass:[(Developer)-[:AUTHORED]->(Commit)]*: Author authored commit.
- *pass:[(CVE)-[:AFFECTS]->(ExternalDependency)]*: Vulnerability affects dependency.

// Derived analyses
- *pass:[(File)-[:CO_CHANGED]->(File)]*: Temporal coupling (co‑change) with `support` and `confidence`.

== Notes

- Schema constraints enforce key properties (e.g., `Method.method_signature`).
- For property and count examples, see the Queries catalog and Architecture pages.
