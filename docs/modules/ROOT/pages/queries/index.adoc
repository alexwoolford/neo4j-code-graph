= Queries Catalog

This section lists example queries with references to tagged Cypher snippets.

== Co-change pairs

Execute this in Neo4j Browser or Bloom to list top co-changed file pairs.

[source,cypher,subs=attributes+]
----
include::example$queries/cochange.cyp[tag=cochange_pairs]
----

== Security & Risk

=== Customer-facing APIs using vulnerable dependencies

[source,cypher,subs=attributes+]
----
include::example$queries/security.cyp[tag=api_vulnerable_dependencies]
----

=== Dependency risk summary

[source,cypher,subs=attributes+]
----
include::example$queries/security.cyp[tag=dependency_risk_summary]
----

== Architecture & Technical Debt

=== Refactor candidates

[source,cypher,subs=attributes+]
----
include::example$queries/architecture.cyp[tag=refactor_candidates]
----

=== Architectural bottlenecks

[source,cypher,subs=attributes+]
----
include::example$queries/architecture.cyp[tag=architectural_bottlenecks]
----


== Team & Process

=== Experts for a module

[source,cypher,subs=attributes+]
----
include::example$queries/team_process.cyp[tag=experts_for_module]
----

=== Frequently co-changed files (simple)

[source,cypher,subs=attributes+]
----
include::example$queries/team_process.cyp[tag=cochange_pairs_simple]
----

=== Most changed files by churn

[source,cypher,subs=attributes+]
----
include::example$queries/team_process.cyp[tag=top_changed_files_by_churn]
----

=== Find documentation attached to methods or classes

Use HAS_DOC to surface docstrings/comments linked to code elements.

----
// Methods and their attached docs
MATCH (m:Method)-[:HAS_DOC]->(d:Doc)
RETURN m.method_signature AS method, d.text AS doc, d.start_line AS start, d.end_line AS end
ORDER BY method, start
----

----
// Classes and their attached docs
MATCH (c:Class)-[:HAS_DOC]->(d:Doc)
RETURN c.name AS class, c.file AS file, d.text AS doc, d.start_line AS start
ORDER BY file, class, start
----

=== Top complex methods (cyclomatic complexity)

Identify potentially complex hotspots using the `cyclomatic_complexity` property.

----
MATCH (m:Method)
WHERE m.cyclomatic_complexity IS NOT NULL
RETURN m.name AS method, m.file AS file, m.cyclomatic_complexity AS cc
ORDER BY cc DESC, file, method
LIMIT 25
----

== Executive Reporting

=== Technical health summary

[source,cypher,subs=attributes+]
----
include::example$queries/executive.cyp[tag=tech_health_summary]
----

=== Release risk assessment

[source,cypher,subs=attributes+]
----
include::example$queries/executive.cyp[tag=release_risk_assessment]
----
